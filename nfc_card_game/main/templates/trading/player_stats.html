{% extends "base.html" %}
{% load static %}


{% block title %}{{ player.name }}{% endblock %}

{% block content %}

<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.0/font/bootstrap-icons.css">
  <link rel="shortcut icon" href="{% static '/images/favicon.png' %}">
</head>

<body>
  <div class="container pt-2">
    <div class="card shadow">
      <div class="card-body">
        <span class="bi-minecart-loaded h1" style="filter: invert(0%)"></span>
        {% if mine %}
        <h4 class="card-title">Welkom bij de mine {{ mine.0.mine.currency }}</h4>
        {% if action.status == "ok" %}
        <table class="table">
          <thead class="thead-dark">
            <tr>
              <th scope="col">Geld gekregen:</th>
              <th scope="col">Afgevelerd:</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              {% if action.bought.item != None %}
              <td class="table-success">{{ action.bought.amount }}x {{ action.bought.item.name }}</td>
              {% else %}
              <td></td>
              {% endif %}
              {% for item, amount in action.costs.items %}
              {% if forloop.counter0 == 0 %}
              {% else %}
              <td></td>
              {% endif %}
              <td class="table-danger">{{ amount.amount }}x {{ item }}</td>
            <tr>
              {% endfor %}
          </tbody>
        </table>
        {% else %}
        <p>{{ action.status }}: {{ action.log }}</p>
        {% endif %}
        {% else %}
        <h4 class="card-title">Welkom bij {{ post.0.post.name }}</h4>
        <h6>Hoeveel {{post.0.post.sells}} wil je kopen? Prijs: {{ price }}</h6>
        <form method="post">
          {% csrf_token %}
          {% for amount, possible in buy_amounts.items %}
          {% if possible %}
          <button class="btn btn-primary my-2 d-block w-25" type="submit" name="amount" value="{{ amount }}">{{ amount
            }}</button>
          {% else %}
          <button class="btn btn-secondary my-2 d-block w-25" disabled name="amount" value="{{ amount }}">{{ amount
            }}</button>
          {% endif %}
          {% endfor %}
        </form>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="container pt-2">
    <div class="accordion card shadow">
      <div class="card-header align-items-center">
        <h4 class="m-0">{{ player.name }} | {{ player.section}} | Inventory</h4>
      </div>
      <div class="card-body">
        <table class="table table-striped">
          <thead>
            <tr>
              <th scope="col">Item</th>
              <th scope="col">Hoeveelheid</th>
            </tr>
          </thead>
          <tbody>
            {% for item in items %}
            <tr>
              <td>{{ item.item }}</td>
              <td>{{ item.amount }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
</body>


{% endblock content %}